{% extends 'base2.html' %}
<br><br>
{% block content %}


<br>
<div class="card rounded-4">
    <div class="card-header rounded-4" style="display: flex; justify-content: space-between; align-items: center;">
        <div>
        <h1 class="text-uppercase font-weight-bold text-center">Profile</h1>
        </div>
        <div>
        <a href="{{url_for('edit_profile',id=current_user.id)}}" class="btn btn-outline-info btn-sm font-weight-bold"><i>Edit</i></a>
        <a href="{{ url_for('logout')}}" class="btn btn-outline-danger btn-sm font-weight-bold">Logout</a>
        </div>
    </div>
    
    <div class="card-body rounded-4">
        <p class="card-text">
        <div class="container">
            <div class="row">
                <div class="col rounded-4">
                    {% if current_user.profile_pic %}
                    <img src="{{url_for('static', filename='images/profile_pic/'+ current_user.profile_pic)}}" width="200"
                         class="rounded-2" style=" min-width: 12rem; margin-left: 3.2rem;">

                    {% else %}
                    <img src="{{url_for('static', filename='images/profile_pic/user.png')}}" class="rounded-2" width="200" style=" min-width: 12rem; margin-left: 3.2rem;">
                    {% endif %}
                </div>

                <div class="col">
                    {% if current_user.is_authenticated and (current_user.role=='Author' or current_user.role=='Admin') %}


                        
                            
                                <div class="row text-center" style="margin: auto; margin-top: 17%;">
                                    
                                    <div class="col">
                                        <i class="fa-solid fa-file-pen"></i>
                                        <p>{{total_posts}}</p>
                                    </div>
                                    <div class="col">
                                        <i class="fa-solid fa-heart"></i>
                                        <p>{{total_likes}}</p>
                                    </div>
                                    <div class="col">
                                        <i class="fa-solid fa-eye"></i>
                                        <p>{{total_views}}</p>
                                    </div>
                                </div>
                           
                       

                        {% endif %}

                </div>



                <div class="col"  style="min-width: 14.125rem;" >
                    <strong style="font-size: 1rem; color: #97B2FC;">{{current_user.name | upper}}</strong>
                    <br>

                    <strong>Username:</strong>
                    {{current_user.username}}<br>
                    
                    <strong>Mobile:</strong>
                    {{current_user.phone}}<br>

                    <strong>Email:</strong>
                    {{current_user.email}}<br>


                    <strong>About:</strong>
                    {{current_user.about_author}}<br>

                    <strong>Date Joined:</strong>
                    {{current_user.date_added}}<br>
                    </p>

                       
                </div>
                

             
            </div>
        </div>

    </div>
</div>
<br>


<br>
<br>

<!-- ### posts ### -->
{% if current_user.is_authenticated and (current_user.role=='Author' or current_user.role=='Admin') %}
<div class="card rounded-4">
    <div class="card-header rounded-4" style="display: flex; justify-content: space-between; align-items: center;">
        <div>
        <h1 class="text-uppercase font-weight-bold text-center">Posts</h1>
        </div>
    </div>
    
    <div class="card-body rounded-4">
        <p class="card-text">
        <div class="container">
            <div class="row">
                
                <div class="col rounded-4"  style="min-width: 14.125rem;" >
                    <table class="table table-success table-striped">
                        <thead>
                            <tr>
                                <th>Post Title</th>
                                <th style="width: 30%; padding-left: 1.5rem;">Category</th>
                                <th style="width: 25%; padding-left: 1.5rem;">Tools</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for post in post %}
                                <tr>
                                    <td>{{ post.title|truncate(30) }}</td>
                                    <td>{{ post.category}}</td>
                                    <td>
                                        <a href="{{url_for('edit_post',id=post.id)}}" class="btn btn-primary"><i class="fa-regular fa-pen-to-square" style="padding: .3rem .5rem;"></i></a>
                                        <a onclick="return confirm('Are you sure you want to delete this post?');" href="{{url_for('delete_post',id=post.id)}}" class="btn btn-danger"><i class="fas fa-trash" style="padding: .3rem .5rem; "></i></a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                       
                </div>
                

             
            </div>
        </div>

    </div>
</div>
<br><br>
{% endif %}


<br>
{% endblock %}

<!-- {{url_for('static', filename='images/default_user.png')}} -->